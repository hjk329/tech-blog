## 코어 웹 바이탈 최적화하기
코어 웹 바이탈 개념이 생소하신 분들은 아래에서 자세한 정보를 확인하실 수 있습니다 :)  

지난 포스팅에서 코어 웹 바이탈의 개념과 측정 방식 및 도구에 대해 알아보았습니다.  
이번 포스팅에서는 실제로 코어 웹 바이탈의 메트릭을 최적화했던 사례를 공유합니다.  

## LCP 최적화하기
우리 프로덕트의 메인 페이지에 첫 진입했을때 LCP 요소는 최상단의 이미지입니다.  
LCP 점수 향상을 위해 사용한 전략은 아래와 같습니다.

- 이미지를 압축해서 최적화된 이미지를 전달합니다
- CDN을 이용해서 사용자에게 물리적으로 더 가깝게 캐시합니다


프로덕트를 처음 릴리즈 했을때는 해당 LCP 요소는 로컬에서 저장된 이미지를 보여주는 방식이었습니다. 
또한, 이미지의 용량이 약 23MB로 꽤나 거대한 파일이었습니다.  

코어 웹 바이탈 도큐먼트에서 안내한 대로 webm 파일로 변환해보았습니다.  
그 크기는 536KB(0.53MB)로 기존의 크기인 23MB의 약 25%로 축소되었습니다.  

사내 프로젝트 정적 리소스는 AWS S3에서 관리하고 있습니다.  
따라서, webp로 변환한 이미지 파일을 S3에 업로드해준 후 해당 파일을 CloudFront를 통해 가져오도록 처리했습니다.

개발자 도구의 Performance 패널에서 LCP 소요 시간을 측정해본 결과는 아래와 같습니다.  
캐시 데이터의 영향을 받지 않기 위해서 시크릿 모드에서 테스트했습니다.  

- 이미지 요소 압축 전

![lcp 최적화 전](/assets/images/core-web-vitals/lcp-bad.png)  

- 이미지 요소 압축 후
![lcp 최적화 후](/assets/images/core-web-vitals/lcp-improved.png)


결과적으로 LCP 소요시간이 1550ms에서 128ms으로 약 90% 이상 단축되었습니다!  

## FID 최적화하기
TBT(Total Blocking Time, 총 차단 시간) 메트릭을 통해 FID를 개선해보았습니다.  
TBT는 코어 웹 바이탈에 포함되는 메트릭은 아니지만, 메인 스레드가 입력 응답을 막는 시간과 관련이 있기 때문에 해당 메트릭을 개선하면 FID도 자연스레 개선할 수 있을 것이라 생각했습니다.  

TBT는 개발자 도구의 퍼포먼스 패널 하단에서 확인하실 수 있습니다.  
양호한 TBT 점수는 30ms 미만입니다.  

최적화하기 전 TBT는 330ms로 양호한 기준인 300ms 보다도 조금 
